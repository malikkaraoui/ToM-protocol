# THIS FILE IS AUTOMATICALLY GENERATED BY CARGO
#
# When uploading crates to the registry Cargo will automatically
# "normalize" Cargo.toml files for maximal compatibility
# with all versions of Cargo and also rewrite `path` dependencies
# to registry (e.g., crates.io) dependencies.
#
# If you are reading this file be aware that the original Cargo.toml
# will likely look very different (and much more reasonable).
# See Cargo.toml.orig for the original contents.

[package]
edition = "2024"
rust-version = "1.88"
name = "tom-quinn"
version = "0.16.1"
build = "build.rs"
autolib = false
autobins = false
autoexamples = false
autotests = false
autobenches = false
description = "Versatile QUIC transport protocol implementation"
readme = "README.md"
keywords = ["quic"]
categories = [
    "network-programming",
    "asynchronous",
]
license = "MIT OR Apache-2.0"
repository = "https://github.com/quinn-rs/quinn"
resolver = "2"

[package.metadata.docs.rs]
features = [
    "lock_tracking",
    "rustls-aws-lc-rs",
    "rustls-ring",
    "runtime-tokio",
    "runtime-smol",
    "tracing-log",
    "rustls-log",
]

[features]
__rustls-post-quantum-test = [
    "rustls/prefer-post-quantum",
    "rustls-aws-lc-rs",
    "proto/__rustls-post-quantum-test",
]
aws-lc-rs = ["proto/aws-lc-rs"]
aws-lc-rs-fips = ["proto/aws-lc-rs-fips"]
bloom = ["proto/bloom"]
default = [
    "tracing-log",
    "platform-verifier",
    "runtime-tokio",
    "rustls-ring",
    "bloom",
]
fast-apple-datapath = ["udp/fast-apple-datapath"]
lock_tracking = []
platform-verifier = ["proto/platform-verifier"]
qlog = ["proto/qlog"]
ring = ["proto/ring"]
runtime-smol = [
    "dep:async-io",
    "dep:smol",
]
runtime-tokio = [
    "tokio/time",
    "tokio/rt",
    "tokio/net",
]
rustls = ["rustls-ring"]
rustls-aws-lc-rs = [
    "dep:rustls",
    "aws-lc-rs",
    "proto/rustls-aws-lc-rs",
    "proto/aws-lc-rs",
]
rustls-aws-lc-rs-fips = [
    "dep:rustls",
    "aws-lc-rs-fips",
    "proto/rustls-aws-lc-rs-fips",
    "proto/aws-lc-rs-fips",
]
rustls-log = ["rustls?/logging"]
rustls-ring = [
    "dep:rustls",
    "ring",
    "proto/rustls-ring",
    "proto/ring",
]
tracing-log = [
    "tracing/log",
    "proto/tracing-log",
    "udp/tracing-log",
]

[lib]
name = "tom_quinn"
path = "src/lib.rs"

# Examples removed — forked from iroh-quinn, examples not copied

# Tests removed — forked from iroh-quinn, integration tests not copied

[[bench]]
name = "bench"
path = "benches/bench.rs"
harness = false
required-features = ["rustls-ring"]

[dependencies.async-executor]
version = "1.13.0"
optional = true

[dependencies.async-fs]
version = "2.1"
optional = true

[dependencies.async-global-executor]
version = "2.4.1"
optional = true

[dependencies.async-io]
version = "2"
optional = true

[dependencies.aws-lc-fips-sys]
version = "0.13.10"
optional = true

[dependencies.aws-lc-sys]
version = "0.34.0"
optional = true

[dependencies.bytes]
version = "1"

[dependencies.futures-io]
version = "0.3.19"
optional = true

[dependencies.gcc]
version = "0.3.55"
optional = true

[dependencies.http]
version = "1.1.0"
optional = true

[dependencies.lazy_static]
version = "1.5.0"
optional = true

[dependencies.pin-project-lite]
version = "0.2"

[dependencies.proto]
path = "../tom-quinn-proto"
default-features = false
package = "tom-quinn-proto"

[dependencies.rustc-hash]
version = "2"

[dependencies.rustls]
version = "0.23.33"
features = ["std"]
optional = true
default-features = false

[dependencies.sharded-slab]
version = "0.1.7"
optional = true

[dependencies.smol]
version = "2"
optional = true

[dependencies.thiserror]
version = "2.0.3"

[dependencies.tokio]
version = "1.28.1"
features = ["sync"]

[dependencies.tokio-stream]
version = "0.1.15"
features = ["sync"]

[dependencies.tracing]
version = "0.1.10"
features = ["std"]
default-features = false

[dependencies.udp]
version = "0.8"
features = ["tracing"]
default-features = false
package = "iroh-quinn-udp"

[dev-dependencies.anyhow]
version = "1.0.22"

[dev-dependencies.clap]
version = "4.5"
features = ["derive"]

[dev-dependencies.crc]
version = "3"

[dev-dependencies.criterion]
version = "0.7"
features = ["async_tokio"]
default-features = false

[dev-dependencies.directories-next]
version = "2"

[dev-dependencies.rand]
version = "0.9"

[dev-dependencies.rcgen]
version = "0.14"

[dev-dependencies.tokio]
version = "1.28.1"
features = [
    "sync",
    "rt",
    "rt-multi-thread",
    "time",
    "macros",
]

[dev-dependencies.tokio-stream]
version = "0.1.15"

[dev-dependencies.tracing-futures]
version = "0.2.0"
features = ["std-future"]
default-features = false

[dev-dependencies.tracing-subscriber]
version = "0.3.1"
features = [
    "env-filter",
    "fmt",
    "ansi",
    "time",
    "local-time",
]
default-features = false

[dev-dependencies.url]
version = "2"

[build-dependencies.cfg_aliases]
version = "0.2.1"

[target.'cfg(all(target_family = "wasm", target_os = "unknown"))'.dependencies.web-time]
version = "1"

[target.'cfg(not(all(target_family = "wasm", target_os = "unknown")))'.dependencies.socket2]
version = ">=0.5, <0.7"

[lints.clippy]
or_fun_call = "warn"
use_self = "warn"

[lints.rust]
elided_lifetimes_in_paths = "warn"
unnameable_types = "warn"
unreachable_pub = "warn"

[lints.rust.unexpected_cfgs]
level = "warn"
priority = 0
check-cfg = ["cfg(fuzzing)"]
